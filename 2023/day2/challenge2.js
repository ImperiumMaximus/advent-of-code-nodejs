console.log(require('fs').readFileSync(require('path').join(__dirname, 'input.txt')).toString().split('\n').map(r => r.split(':')[1].split(';').reduce((acc1, g) => g.split(',').reduce((acc, e) => Object.assign(acc, { [e.trim().split(' ')[1]]: !acc[e.trim().split(' ')[1]] ? Number(e.trim().split(' ')[0]) : Number(e.trim().split(' ')[0]) > acc[e.trim().split(' ')[1]] ? Number(e.trim().split(' ')[0]) : acc[e.trim().split(' ')[1]] }), acc1), {})).reduce((acc2, n) => acc2 + Object.values(n).reduce((acc, m) => acc * m, 1), 0));