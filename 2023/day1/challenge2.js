console.log(require('fs').readFileSync(require('path').join(__dirname, 'input.txt')).toString().split('\n').map(r => Number(r.split('').map((c, ci) => c.match(/[0-9]/g) ? c.match(/[0-9]/g) : (['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'].findIndex(n => r.substring(ci, ci + n.length).includes(n)) + 1).toString()).flatMap(c => c).filter(c => c > 0).reduce((acc, c, i, arr) => acc + (arr.length === 1 ? c + c : ((!i|| i === arr.length - 1) ? c : '')), ''))).reduce((acc, n) => acc + n));